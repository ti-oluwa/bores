<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="3D Three-Phase Black-Oil Reservoir Modelling and Simulation Framework in Python"><meta name=author content=ti-oluwa><link href=https://ti-oluwa.github.io/bores/user-guide/simulation/timestep-control/ rel=canonical><link href=../preconditioners/ rel=prev><link href=../precision/ rel=next><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.3"><title>Timestep Control - BORES</title><link rel=stylesheet href=../../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=DM+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"DM Sans";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=amber> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#time-step-control class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=BORES class="md-header__button md-logo" aria-label=BORES data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> BORES </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Timestep Control </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=amber aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=amber aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent=amber aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ti-oluwa/bores title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ti-oluwa/bores </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../getting-started/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../../fundamentals/ class=md-tabs__link> Fundamentals </a> </li> <li class=md-tabs__item> <a href=../../../tutorials/ class=md-tabs__link> Tutorials </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../../visualization/ class=md-tabs__link> Visualization </a> </li> <li class=md-tabs__item> <a href=../../../api-reference/ class=md-tabs__link> API Reference </a> </li> <li class=md-tabs__item> <a href=../../../best-practices/ class=md-tabs__link> Best Practices </a> </li> <li class=md-tabs__item> <a href=../../../examples/ class=md-tabs__link> Examples </a> </li> <li class=md-tabs__item> <a href=../../../reference/glossary/ class=md-tabs__link> Reference </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=BORES class="md-nav__button md-logo" aria-label=BORES data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> BORES </label> <div class=md-nav__source> <a href=https://github.com/ti-oluwa/bores title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ti-oluwa/bores </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../../getting-started/ class="md-nav__link "> <span class=md-ellipsis> Getting Started </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting-started/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/quickstart/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/concepts/ class=md-nav__link> <span class=md-ellipsis> Core Concepts </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../../fundamentals/ class="md-nav__link "> <span class=md-ellipsis> Fundamentals </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Fundamentals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../fundamentals/reservoir-simulation/ class=md-nav__link> <span class=md-ellipsis> Reservoir Simulation </span> </a> </li> <li class=md-nav__item> <a href=../../../fundamentals/black-oil-model/ class=md-nav__link> <span class=md-ellipsis> The Black-Oil Model </span> </a> </li> <li class=md-nav__item> <a href=../../../fundamentals/grid-systems/ class=md-nav__link> <span class=md-ellipsis> Grid Systems </span> </a> </li> <li class=md-nav__item> <a href=../../../fundamentals/simulation-workflow/ class=md-nav__link> <span class=md-ellipsis> Simulation Workflow </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../../tutorials/ class="md-nav__link "> <span class=md-ellipsis> Tutorials </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tutorials/01-first-simulation/ class=md-nav__link> <span class=md-ellipsis> 1. Your First Simulation </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/02-building-models/ class=md-nav__link> <span class=md-ellipsis> 2. Building Reservoir Models </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/03-waterflood/ class=md-nav__link> <span class=md-ellipsis> 3. Waterflood Simulation </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/04-gas-injection/ class=md-nav__link> <span class=md-ellipsis> 4. Gas Injection </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/05-miscible-flooding/ class=md-nav__link> <span class=md-ellipsis> 5. Miscible Gas Flooding </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <div class="md-nav__link md-nav__container"> <a href=../../ class="md-nav__link "> <span class=md-ellipsis> User Guide </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../grids/ class=md-nav__link> <span class=md-ellipsis> Grids </span> </a> </li> <li class=md-nav__item> <a href=../../rock-properties/ class=md-nav__link> <span class=md-ellipsis> Rock Properties </span> </a> </li> <li class=md-nav__item> <a href=../../fluid-properties/ class=md-nav__link> <span class=md-ellipsis> Fluid Properties </span> </a> </li> <li class=md-nav__item> <a href=../../relative-permeability/ class=md-nav__link> <span class=md-ellipsis> Relative Permeability </span> </a> </li> <li class=md-nav__item> <a href=../../capillary-pressure/ class=md-nav__link> <span class=md-ellipsis> Capillary Pressure </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_7> <label class=md-nav__link for=__nav_5_7 id=__nav_5_7_label tabindex> <span class=md-ellipsis> Wells </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_7_label aria-expanded=false> <label class=md-nav__title for=__nav_5_7> <span class="md-nav__icon md-icon"></span> Wells </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../wells/basics/ class=md-nav__link> <span class=md-ellipsis> Well Basics </span> </a> </li> <li class=md-nav__item> <a href=../../wells/controls/ class=md-nav__link> <span class=md-ellipsis> Well Controls </span> </a> </li> <li class=md-nav__item> <a href=../../wells/fluids/ class=md-nav__link> <span class=md-ellipsis> Well Fluids </span> </a> </li> <li class=md-nav__item> <a href=../../wells/schedules/ class=md-nav__link> <span class=md-ellipsis> Well Schedules </span> </a> </li> <li class=md-nav__item> <a href=../../wells/patterns/ class=md-nav__link> <span class=md-ellipsis> Well Patterns </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_8 checked> <label class=md-nav__link for=__nav_5_8 id=__nav_5_8_label tabindex> <span class=md-ellipsis> Simulation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_8_label aria-expanded=true> <label class=md-nav__title for=__nav_5_8> <span class="md-nav__icon md-icon"></span> Simulation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../schemes/ class=md-nav__link> <span class=md-ellipsis> Schemes </span> </a> </li> <li class=md-nav__item> <a href=../solvers/ class=md-nav__link> <span class=md-ellipsis> Solvers </span> </a> </li> <li class=md-nav__item> <a href=../preconditioners/ class=md-nav__link> <span class=md-ellipsis> Preconditioners </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Timestep Control </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Timestep Control </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#the-time-helper class=md-nav__link> <span class=md-ellipsis> The Time() Helper </span> </a> </li> <li class=md-nav__item> <a href=#configuring-the-timer class=md-nav__link> <span class=md-ellipsis> Configuring the Timer </span> </a> <nav class=md-nav aria-label="Configuring the Timer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#full-timer-parameters class=md-nav__link> <span class=md-ellipsis> Full Timer Parameters </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#adaptive-time-stepping class=md-nav__link> <span class=md-ellipsis> Adaptive Time Stepping </span> </a> <nav class=md-nav aria-label="Adaptive Time Stepping"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-acceptance class=md-nav__link> <span class=md-ellipsis> Step Acceptance </span> </a> </li> <li class=md-nav__item> <a href=#step-rejection class=md-nav__link> <span class=md-ellipsis> Step Rejection </span> </a> </li> <li class=md-nav__item> <a href=#constant-step-size-mode class=md-nav__link> <span class=md-ellipsis> Constant Step Size Mode </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#saturation-and-pressure-change-limits class=md-nav__link> <span class=md-ellipsis> Saturation and Pressure Change Limits </span> </a> <nav class=md-nav aria-label="Saturation and Pressure Change Limits"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adjusting-limits-by-scenario class=md-nav__link> <span class=md-ellipsis> Adjusting Limits by Scenario </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cfl-thresholds class=md-nav__link> <span class=md-ellipsis> CFL Thresholds </span> </a> </li> <li class=md-nav__item> <a href=#ramp-up-factor class=md-nav__link> <span class=md-ellipsis> Ramp-Up Factor </span> </a> </li> <li class=md-nav__item> <a href=#step-size-smoothing class=md-nav__link> <span class=md-ellipsis> Step Size Smoothing </span> </a> </li> <li class=md-nav__item> <a href=#timer-state-and-checkpointing class=md-nav__link> <span class=md-ellipsis> Timer State and Checkpointing </span> </a> </li> <li class=md-nav__item> <a href=#recommended-configurations class=md-nav__link> <span class=md-ellipsis> Recommended Configurations </span> </a> <nav class=md-nav aria-label="Recommended Configurations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#standard-waterflood class=md-nav__link> <span class=md-ellipsis> Standard Waterflood </span> </a> </li> <li class=md-nav__item> <a href=#gas-injection class=md-nav__link> <span class=md-ellipsis> Gas Injection </span> </a> </li> <li class=md-nav__item> <a href=#primary-depletion class=md-nav__link> <span class=md-ellipsis> Primary Depletion </span> </a> </li> <li class=md-nav__item> <a href=#well-startup-rate-change class=md-nav__link> <span class=md-ellipsis> Well Startup / Rate Change </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../precision/ class=md-nav__link> <span class=md-ellipsis> Precision </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_9> <label class=md-nav__link for=__nav_5_9 id=__nav_5_9_label tabindex> <span class=md-ellipsis> Advanced </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_9_label aria-expanded=false> <label class=md-nav__title for=__nav_5_9> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../advanced/pvt-tables/ class=md-nav__link> <span class=md-ellipsis> PVT Tables </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/fractures/ class=md-nav__link> <span class=md-ellipsis> Faults & Fractures </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/miscibility/ class=md-nav__link> <span class=md-ellipsis> Miscible Flooding </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/boundary-conditions/ class=md-nav__link> <span class=md-ellipsis> Boundary Conditions </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/aquifers/ class=md-nav__link> <span class=md-ellipsis> Aquifer Modeling </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/states-streams/ class=md-nav__link> <span class=md-ellipsis> States & Streams </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/model-analysis/ class=md-nav__link> <span class=md-ellipsis> Model Analysis </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/serialization/ class=md-nav__link> <span class=md-ellipsis> Serialization </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../config/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../constants/ class=md-nav__link> <span class=md-ellipsis> Constants </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <div class="md-nav__link md-nav__container"> <a href=../../../visualization/ class="md-nav__link "> <span class=md-ellipsis> Visualization </span> </a> <label class="md-nav__link " for=__nav_6 id=__nav_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Visualization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../visualization/1d-plots/ class=md-nav__link> <span class=md-ellipsis> 1D Time Series </span> </a> </li> <li class=md-nav__item> <a href=../../../visualization/2d-maps/ class=md-nav__link> <span class=md-ellipsis> 2D Maps </span> </a> </li> <li class=md-nav__item> <a href=../../../visualization/3d-rendering/ class=md-nav__link> <span class=md-ellipsis> 3D Volume Rendering </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <div class="md-nav__link md-nav__container"> <a href=../../../api-reference/ class="md-nav__link "> <span class=md-ellipsis> API Reference </span> </a> <label class="md-nav__link " for=__nav_7 id=__nav_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> API Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../api-reference/correlations-scalar/ class=md-nav__link> <span class=md-ellipsis> Scalar Correlations </span> </a> </li> <li class=md-nav__item> <a href=../../../api-reference/correlations-array/ class=md-nav__link> <span class=md-ellipsis> Array Correlations </span> </a> </li> <li class=md-nav__item> <a href=../../../api-reference/full-api/ class=md-nav__link> <span class=md-ellipsis> Full API </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8> <div class="md-nav__link md-nav__container"> <a href=../../../best-practices/ class="md-nav__link "> <span class=md-ellipsis> Best Practices </span> </a> <label class="md-nav__link " for=__nav_8 id=__nav_8_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Best Practices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../best-practices/grid-design/ class=md-nav__link> <span class=md-ellipsis> Grid Design </span> </a> </li> <li class=md-nav__item> <a href=../../../best-practices/timestep-selection/ class=md-nav__link> <span class=md-ellipsis> Timestep Selection </span> </a> </li> <li class=md-nav__item> <a href=../../../best-practices/solver-selection/ class=md-nav__link> <span class=md-ellipsis> Solver Selection </span> </a> </li> <li class=md-nav__item> <a href=../../../best-practices/errors/ class=md-nav__link> <span class=md-ellipsis> Errors </span> </a> </li> <li class=md-nav__item> <a href=../../../best-practices/performance/ class=md-nav__link> <span class=md-ellipsis> Performance </span> </a> </li> <li class=md-nav__item> <a href=../../../best-practices/validation/ class=md-nav__link> <span class=md-ellipsis> Validation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9> <div class="md-nav__link md-nav__container"> <a href=../../../examples/ class="md-nav__link "> <span class=md-ellipsis> Examples </span> </a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_10> <label class=md-nav__link for=__nav_10 id=__nav_10_label tabindex=0> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=false> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/glossary/ class=md-nav__link> <span class=md-ellipsis> Glossary </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/units/ class=md-nav__link> <span class=md-ellipsis> Units </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#the-time-helper class=md-nav__link> <span class=md-ellipsis> The Time() Helper </span> </a> </li> <li class=md-nav__item> <a href=#configuring-the-timer class=md-nav__link> <span class=md-ellipsis> Configuring the Timer </span> </a> <nav class=md-nav aria-label="Configuring the Timer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#full-timer-parameters class=md-nav__link> <span class=md-ellipsis> Full Timer Parameters </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#adaptive-time-stepping class=md-nav__link> <span class=md-ellipsis> Adaptive Time Stepping </span> </a> <nav class=md-nav aria-label="Adaptive Time Stepping"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-acceptance class=md-nav__link> <span class=md-ellipsis> Step Acceptance </span> </a> </li> <li class=md-nav__item> <a href=#step-rejection class=md-nav__link> <span class=md-ellipsis> Step Rejection </span> </a> </li> <li class=md-nav__item> <a href=#constant-step-size-mode class=md-nav__link> <span class=md-ellipsis> Constant Step Size Mode </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#saturation-and-pressure-change-limits class=md-nav__link> <span class=md-ellipsis> Saturation and Pressure Change Limits </span> </a> <nav class=md-nav aria-label="Saturation and Pressure Change Limits"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adjusting-limits-by-scenario class=md-nav__link> <span class=md-ellipsis> Adjusting Limits by Scenario </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cfl-thresholds class=md-nav__link> <span class=md-ellipsis> CFL Thresholds </span> </a> </li> <li class=md-nav__item> <a href=#ramp-up-factor class=md-nav__link> <span class=md-ellipsis> Ramp-Up Factor </span> </a> </li> <li class=md-nav__item> <a href=#step-size-smoothing class=md-nav__link> <span class=md-ellipsis> Step Size Smoothing </span> </a> </li> <li class=md-nav__item> <a href=#timer-state-and-checkpointing class=md-nav__link> <span class=md-ellipsis> Timer State and Checkpointing </span> </a> </li> <li class=md-nav__item> <a href=#recommended-configurations class=md-nav__link> <span class=md-ellipsis> Recommended Configurations </span> </a> <nav class=md-nav aria-label="Recommended Configurations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#standard-waterflood class=md-nav__link> <span class=md-ellipsis> Standard Waterflood </span> </a> </li> <li class=md-nav__item> <a href=#gas-injection class=md-nav__link> <span class=md-ellipsis> Gas Injection </span> </a> </li> <li class=md-nav__item> <a href=#primary-depletion class=md-nav__link> <span class=md-ellipsis> Primary Depletion </span> </a> </li> <li class=md-nav__item> <a href=#well-startup-rate-change class=md-nav__link> <span class=md-ellipsis> Well Startup / Rate Change </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <nav class=md-path aria-label=Navigation> <ol class=md-path__list> <li class=md-path__item> <a href=../../.. class=md-path__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-path__item> <a href=../../ class=md-path__link> <span class=md-ellipsis> User Guide </span> </a> </li> <li class=md-path__item> <a href=../schemes/ class=md-path__link> <span class=md-ellipsis> Simulation </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <a href=https://github.com/ti-oluwa/bores/edit/main/docs/user-guide/simulation/timestep-control.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg> </a> <a href=https://github.com/ti-oluwa/bores/raw/main/docs/user-guide/simulation/timestep-control.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"/></svg> </a> <h1 id=time-step-control>Time Step Control<a class=headerlink href=#time-step-control title="Permanent link">&para;</a></h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>Time step control determines how much simulated time the solver advances in each iteration. Choosing the right time step size is critical because steps that are too large cause numerical instability, oscillations, or outright divergence, while steps that are too small waste computational effort without improving accuracy.</p> <p>In explicit and IMPES schemes, time step size is constrained by the CFL (Courant-Friedrichs-Lewy) condition, which sets a physical limit on how far information can travel through the grid in a single step. If the time step allows a saturation or pressure front to cross more than one grid cell, the solution becomes unstable. Even in implicit schemes where unconditional stability is theoretically guaranteed, excessively large steps can cause the Newton solver to struggle or produce inaccurate solutions.</p> <p>BORES uses an adaptive time stepping system through the <code>Timer</code> class. Rather than requiring you to guess a fixed step size, the timer monitors CFL numbers, saturation changes, pressure changes, and solver performance to automatically grow the step size when conditions are smooth and shrink it when conditions become challenging. This adaptive approach typically uses 3 to 10 times fewer total steps than a fixed step size that is conservative enough to handle the worst case, while maintaining the same level of accuracy and stability.</p> <p>The adaptive system is particularly important in reservoir simulation because the physics changes dramatically during a run. Early time steps near wells and injection fronts require very small steps, while late-time depletion far from wells can use much larger steps. A fixed step size must accommodate the most demanding period, wasting effort during the easier periods.</p> <hr> <h2 id=the-time-helper>The <code>Time()</code> Helper<a class=headerlink href=#the-time-helper title="Permanent link">&para;</a></h2> <p>All timer parameters are specified in seconds, but thinking in seconds is inconvenient for reservoir simulation where durations range from hours to years. The <code>Time()</code> function converts human-readable time components into seconds:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=kn>import</span><span class=w> </span><span class=nn>bores</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=c1># Single component</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=n>one_day</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>           <span class=c1># 86400.0</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=n>six_hours</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>hours</span><span class=o>=</span><span class=mi>6</span><span class=p>)</span>        <span class=c1># 21600.0</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=n>three_years</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>years</span><span class=o>=</span><span class=mi>3</span><span class=p>)</span>      <span class=c1># ~94608000.0</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=c1># Combined components</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=n>mixed</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>hours</span><span class=o>=</span><span class=mi>6</span><span class=p>)</span>    <span class=c1># 108000.0</span>
</span></code></pre></div> <p><code>Time()</code> accepts any combination of <code>milliseconds</code>, <code>seconds</code>, <code>minutes</code>, <code>hours</code>, <code>days</code>, <code>weeks</code>, <code>months</code>, and <code>years</code>. Components are additive. One year is defined as 365.25 days (by default), and one month is one-twelfth of a year (approximately 30.4 days). These are engineering approximations, not calendar-accurate durations, and they are standard conventions in reservoir simulation.</p> <p>You can use <code>Time()</code> anywhere a duration in seconds is expected, including all <code>Timer</code> parameters and simulation analysis functions.</p> <hr> <h2 id=configuring-the-timer>Configuring the Timer<a class=headerlink href=#configuring-the-timer title="Permanent link">&para;</a></h2> <p>The <code>Timer</code> class controls all aspects of time stepping. At minimum, you must specify four parameters: the initial step size, the maximum and minimum allowed step sizes, and the total simulation time.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=kn>import</span><span class=w> </span><span class=nn>bores</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=n>timer</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Timer</span><span class=p>(</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>    <span class=n>initial_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>    <span class=n>max_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>10</span><span class=p>),</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>    <span class=n>min_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>hours</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>    <span class=n>simulation_time</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>years</span><span class=o>=</span><span class=mi>3</span><span class=p>),</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=p>)</span>
</span></code></pre></div> <p>The initial step size is the starting point for the adaptive algorithm. It should be conservative enough that the first few steps succeed without rejection. A good starting point is 0.5 to 2 days for most problems. If you start too large, the timer will reject the first few steps and reduce the size automatically, but each rejection wastes a solver call.</p> <p>The maximum step size caps how large the timer can grow. Even when conditions are very smooth, you generally do not want steps larger than 10 to 30 days because the linearization errors in PVT property updates accumulate. The minimum step size sets a floor below which the timer will not go. If the timer hits this floor repeatedly, it raises a <code>TimingError</code> after <code>max_rejects</code> consecutive rejections (default 10), indicating that the problem may be poorly configured.</p> <h3 id=full-timer-parameters>Full Timer Parameters<a class=headerlink href=#full-timer-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Parameter</th> <th>Default</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>initial_step_size</code></td> <td>(required)</td> <td>Starting step size in seconds</td> </tr> <tr> <td><code>max_step_size</code></td> <td>(required)</td> <td>Upper bound on step size</td> </tr> <tr> <td><code>min_step_size</code></td> <td>(required)</td> <td>Lower bound on step size</td> </tr> <tr> <td><code>simulation_time</code></td> <td>(required)</td> <td>Total simulation duration</td> </tr> <tr> <td><code>max_cfl_number</code></td> <td>0.9</td> <td>Default CFL limit for adaptive adjustments</td> </tr> <tr> <td><code>backoff_factor</code></td> <td>0.5</td> <td>Multiplier when a step is rejected</td> </tr> <tr> <td><code>aggressive_backoff_factor</code></td> <td>0.25</td> <td>Multiplier for severe rejections</td> </tr> <tr> <td><code>ramp_up_factor</code></td> <td><code>None</code></td> <td>Optional growth multiplier after cooldown</td> </tr> <tr> <td><code>max_steps</code></td> <td><code>None</code></td> <td>Optional hard limit on total step count</td> </tr> <tr> <td><code>max_rejects</code></td> <td>10</td> <td>Maximum consecutive rejections before error</td> </tr> <tr> <td><code>max_growth_per_step</code></td> <td>1.3</td> <td>Maximum multiplicative growth per step (30%)</td> </tr> <tr> <td><code>growth_cooldown_steps</code></td> <td>5</td> <td>Successful steps required before ramp-up</td> </tr> <tr> <td><code>cfl_safety_margin</code></td> <td>0.85</td> <td>Safety factor applied to CFL targets</td> </tr> <tr> <td><code>step_size_smoothing</code></td> <td>0.2</td> <td>EMA smoothing factor (0 = none, 1 = max)</td> </tr> <tr> <td><code>metrics_history_size</code></td> <td>10</td> <td>Number of recent steps tracked for trends</td> </tr> <tr> <td><code>failure_memory_window</code></td> <td>5</td> <td>Number of recent failures remembered</td> </tr> </tbody> </table> <hr> <h2 id=adaptive-time-stepping>Adaptive Time Stepping<a class=headerlink href=#adaptive-time-stepping title="Permanent link">&para;</a></h2> <p>The adaptive algorithm works by monitoring multiple criteria at each step and adjusting the next step size accordingly. The process has two phases: acceptance (where the step succeeded and we decide whether to grow) and rejection (where the step failed and we must shrink).</p> <h3 id=step-acceptance>Step Acceptance<a class=headerlink href=#step-acceptance title="Permanent link">&para;</a></h3> <p>When a step succeeds, the timer evaluates several adjustment factors:</p> <ol> <li> <p><strong>CFL-based adjustment</strong>: If the CFL number is well below the threshold (utilization &lt; 70%), the timer allows growth. If the CFL is above 90% of the threshold, growth is suppressed. The <code>cfl_safety_margin</code> (default 0.85) targets a CFL below the absolute limit.</p> </li> <li> <p><strong>Saturation change adjustment</strong>: The timer compares the maximum saturation change against the allowed limit (from <code>Config</code>). Low utilization (&lt; 30%) allows up to 30% growth, while high utilization (&gt; 95%) triggers a 15% reduction even though the step was accepted.</p> </li> <li> <p><strong>Pressure change adjustment</strong>: Same logic as saturation, comparing actual pressure change against the allowed limit.</p> </li> <li> <p><strong>Newton iteration adjustment</strong>: For implicit schemes, if the solver needed more than 10 iterations, the step size is reduced by 30%. If it converged in fewer than 4 iterations after several stable steps, a 20% growth is allowed.</p> </li> <li> <p><strong>Performance trend analysis</strong>: The timer tracks the last 10 steps and detects concerning trends. If CFL numbers are consistently high or increasing, or if Newton iterations are consistently above 8, a performance factor below 1.0 further dampens growth.</p> </li> </ol> <p>All factors are multiplied together, then the result is capped by <code>max_growth_per_step</code> (default 1.3, meaning no more than 30% growth per step). The final value is smoothed through an exponential moving average controlled by <code>step_size_smoothing</code>, which prevents erratic oscillations in step size.</p> <h3 id=step-rejection>Step Rejection<a class=headerlink href=#step-rejection title="Permanent link">&para;</a></h3> <p>When a step fails (CFL exceeded, saturation change too large, solver diverged), the timer uses intelligent backoff based on the specific failure cause:</p> <table> <thead> <tr> <th>Failure Cause</th> <th>Overshoot Ratio</th> <th>Backoff Factor</th> </tr> </thead> <tbody> <tr> <td>Mild CFL violation (1.0 to 1.5x)</td> <td>&lt; 1.5</td> <td>0.6 to 0.9 (proportional)</td> </tr> <tr> <td>Moderate CFL violation (1.5 to 2.0x)</td> <td>1.5 to 2.0</td> <td>0.5</td> </tr> <tr> <td>Severe CFL violation (&gt; 2.0x)</td> <td>&gt; 2.0</td> <td>0.3</td> </tr> <tr> <td>Moderate saturation overshoot</td> <td>&lt; 2.0</td> <td>0.5 to proportional</td> </tr> <tr> <td>Large saturation overshoot</td> <td>2.0 to 3.0</td> <td>0.4</td> </tr> <tr> <td>Severe saturation overshoot</td> <td>&gt; 3.0</td> <td>0.25</td> </tr> <tr> <td>Newton solver struggling (&gt; 15 iterations)</td> <td>n/a</td> <td>0.5</td> </tr> <tr> <td>Newton solver failing (&gt; 20 iterations)</td> <td>n/a</td> <td>0.3</td> </tr> </tbody> </table> <p>When multiple criteria are violated simultaneously, the timer uses the most conservative (smallest) backoff factor. If no specific failure information is available, it falls back to <code>backoff_factor</code> (0.5) or <code>aggressive_backoff_factor</code> (0.25).</p> <p>The timer also remembers recently failed step sizes and avoids proposing sizes near those values. If a proposed size is within 15% of a recently failed size, it is reduced by an additional 20%.</p> <h3 id=constant-step-size-mode>Constant Step Size Mode<a class=headerlink href=#constant-step-size-mode title="Permanent link">&para;</a></h3> <p>If you set <code>initial_step_size</code>, <code>max_step_size</code>, and <code>min_step_size</code> to the same value, the timer automatically enters constant step size mode. In this mode, all adaptive logic is bypassed and every step uses the specified size:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1># Fixed 1-day steps</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=n>timer</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Timer</span><span class=p>(</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>    <span class=n>initial_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>    <span class=n>max_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>    <span class=n>min_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>    <span class=n>simulation_time</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>years</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=p>)</span>
</span></code></pre></div> <p>Constant step size is rarely optimal, but it can be useful for debugging (to isolate whether time stepping is contributing to an issue) or for comparing against analytical solutions at specific time points.</p> <hr> <h2 id=saturation-and-pressure-change-limits>Saturation and Pressure Change Limits<a class=headerlink href=#saturation-and-pressure-change-limits title="Permanent link">&para;</a></h2> <p>The <code>Config</code> class provides per-phase saturation change limits and a pressure change limit that the timer uses to judge whether a step is acceptable. These limits are the primary mechanism for controlling accuracy in IMPES and explicit schemes.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=n>config</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Config</span><span class=p>(</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>    <span class=n>timer</span><span class=o>=</span><span class=n>timer</span><span class=p>,</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>    <span class=n>rock_fluid_tables</span><span class=o>=</span><span class=n>rock_fluid</span><span class=p>,</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>    <span class=n>wells</span><span class=o>=</span><span class=n>wells</span><span class=p>,</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>    <span class=n>max_oil_saturation_change</span><span class=o>=</span><span class=mf>0.5</span><span class=p>,</span>      <span class=c1># Default</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>    <span class=n>max_water_saturation_change</span><span class=o>=</span><span class=mf>0.4</span><span class=p>,</span>    <span class=c1># Default</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>    <span class=n>max_gas_saturation_change</span><span class=o>=</span><span class=mf>0.85</span><span class=p>,</span>     <span class=c1># Default</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a>    <span class=n>max_pressure_change</span><span class=o>=</span><span class=mf>100.0</span><span class=p>,</span>          <span class=c1># Default, psi</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=p>)</span>
</span></code></pre></div> <p>Each limit specifies the maximum absolute change allowed in a single time step. If any cell in the grid exceeds the limit, the step is rejected and the timer reduces the step size.</p> <p>These defaults are deliberately permissive to allow large time steps in the common case. Most reservoir simulations involve gradual, smooth changes where large steps are perfectly accurate. The defaults are designed so that the adaptive timer can take big steps during quiet periods and only restrict step size when the physics genuinely demands it. You should feel free to leave them at their defaults for most work and only tighten them if you observe specific issues.</p> <p>The gas saturation limit (0.85) is the most permissive because gas saturation fronts are inherently sharp and restricting them too aggressively forces very small time steps without proportional accuracy improvement. The water limit (0.4) is more conservative because water fronts tend to be smoother and more amenable to accurate large-step tracking. The oil limit (0.5) sits in the middle. The pressure change limit of 100 psi works well for typical reservoir pressures of 1,000 to 5,000 psi, representing roughly a 2 to 10% relative change.</p> <p>If you want tighter accuracy (for example, for validation studies or detailed front tracking), you can reduce these limits. If you want faster runs for screening purposes, you can relax them further. The simulation remains stable either way because the timer enforces the limits strictly; looser limits simply allow larger steps.</p> <h3 id=adjusting-limits-by-scenario>Adjusting Limits by Scenario<a class=headerlink href=#adjusting-limits-by-scenario title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Scenario</th> <th>Saturation Limits</th> <th>Pressure Limit</th> </tr> </thead> <tbody> <tr> <td>Standard waterflood</td> <td>Defaults are fine</td> <td>100 psi</td> </tr> <tr> <td>Gas injection</td> <td>Reduce water to 0.3</td> <td>75 psi</td> </tr> <tr> <td>Low-pressure reservoir (&lt; 1000 psi)</td> <td>Defaults are fine</td> <td>25 to 50 psi</td> </tr> <tr> <td>High-pressure reservoir (&gt; 5000 psi)</td> <td>Defaults are fine</td> <td>150 to 200 psi</td> </tr> <tr> <td>Tight convergence / validation</td> <td>Reduce all by 30 to 50%</td> <td>50 psi</td> </tr> <tr> <td>Fast screening runs</td> <td>Relax all by 50% or more</td> <td>200 to 300 psi</td> </tr> </tbody> </table> <p>Tighter limits improve accuracy but require more time steps. Looser limits improve performance at the cost of some accuracy in tracking sharp fronts. In most cases, the defaults provide a good balance between speed and accuracy. If you observe pressure oscillations or material balance errors, tighten the pressure limit first. If saturation fronts show non-physical overshoots, tighten the relevant saturation limit.</p> <hr> <h2 id=cfl-thresholds>CFL Thresholds<a class=headerlink href=#cfl-thresholds title="Permanent link">&para;</a></h2> <p>The CFL (Courant-Friedrichs-Lewy) number measures how far a wave front moves relative to the grid cell size in a single time step. A CFL number above 1.0 means the front crosses more than one cell per step, which causes instability in explicit methods.</p> <p>The <code>Config</code> provides separate CFL thresholds for pressure and saturation:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=n>config</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Config</span><span class=p>(</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>    <span class=n>timer</span><span class=o>=</span><span class=n>timer</span><span class=p>,</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>    <span class=n>rock_fluid_tables</span><span class=o>=</span><span class=n>rock_fluid</span><span class=p>,</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>    <span class=n>wells</span><span class=o>=</span><span class=n>wells</span><span class=p>,</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>    <span class=n>saturation_cfl_threshold</span><span class=o>=</span><span class=mf>0.6</span><span class=p>,</span>   <span class=c1># Default</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>    <span class=n>pressure_cfl_threshold</span><span class=o>=</span><span class=mf>0.9</span><span class=p>,</span>     <span class=c1># Default</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=p>)</span>
</span></code></pre></div> <p>The saturation CFL threshold (0.6) is more conservative than the pressure threshold (0.9) because saturation transport is hyperbolic and more sensitive to CFL violations. The pressure equation is parabolic (or elliptic in incompressible limits) and tolerates higher CFL numbers.</p> <p>These thresholds interact with the timer's <code>max_cfl_number</code> (default 0.9) and <code>cfl_safety_margin</code> (default 0.85). The timer targets a CFL of <code>threshold * safety_margin</code>, so with defaults the effective target for saturation is approximately 0.51 and for pressure approximately 0.77.</p> <div class="admonition tip"> <p class=admonition-title>CFL and Scheme Selection</p> <p>CFL thresholds only affect the explicit and IMPES schemes. In the IMPES scheme, only the saturation CFL threshold applies (pressure is implicit). In the fully implicit scheme, CFL is not a stability constraint, but the saturation and pressure change limits still apply as accuracy controls.</p> </div> <hr> <h2 id=ramp-up-factor>Ramp-Up Factor<a class=headerlink href=#ramp-up-factor title="Permanent link">&para;</a></h2> <p>The <code>ramp_up_factor</code> provides an additional multiplicative growth on top of the adaptive adjustments. It only activates after <code>growth_cooldown_steps</code> consecutive successful steps and only when all monitoring criteria (CFL, saturation change, pressure change) are below 70% of their limits.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=n>timer</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Timer</span><span class=p>(</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>    <span class=n>initial_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mf>0.5</span><span class=p>),</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>    <span class=n>max_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>15</span><span class=p>),</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>    <span class=n>min_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>hours</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>    <span class=n>simulation_time</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>years</span><span class=o>=</span><span class=mi>5</span><span class=p>),</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>    <span class=n>ramp_up_factor</span><span class=o>=</span><span class=mf>1.2</span><span class=p>,</span>              <span class=c1># 20% extra growth</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>    <span class=n>growth_cooldown_steps</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span>          <span class=c1># After 5 stable steps</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=p>)</span>
</span></code></pre></div> <p>The ramp-up factor is useful when you want the simulation to reach large step sizes quickly after an initial transient period (for example, after well startup or injection rate changes). Without it, the timer grows conservatively based solely on the monitoring criteria. With a ramp-up factor of 1.2, the timer can grow up to 56% per step (1.3 max growth * 1.2 ramp-up), though this is still capped by <code>max_step_size</code>.</p> <p>Setting <code>ramp_up_factor</code> to <code>None</code> (the default) disables this feature entirely, relying solely on the adaptive criteria for growth.</p> <hr> <h2 id=step-size-smoothing>Step Size Smoothing<a class=headerlink href=#step-size-smoothing title="Permanent link">&para;</a></h2> <p>The <code>step_size_smoothing</code> parameter controls an exponential moving average (EMA) filter applied to the proposed step size. Without smoothing, the step size can oscillate between large and small values when the adaptive criteria give conflicting signals.</p> <p>The smoothing factor ranges from 0.0 (no smoothing, the proposed step is used directly) to 1.0 (maximum smoothing, the step size barely changes). The default of 0.2 provides light smoothing that prevents erratic oscillations while still allowing the step size to respond quickly to changing conditions.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1># No smoothing (responsive but potentially oscillatory)</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=n>timer</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Timer</span><span class=p>(</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>    <span class=o>...</span><span class=p>,</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>    <span class=n>step_size_smoothing</span><span class=o>=</span><span class=mf>0.0</span><span class=p>,</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=p>)</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=c1># Heavy smoothing (very stable but slow to adapt)</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=n>timer</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Timer</span><span class=p>(</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>    <span class=o>...</span><span class=p>,</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a>    <span class=n>step_size_smoothing</span><span class=o>=</span><span class=mf>0.5</span><span class=p>,</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=p>)</span>
</span></code></pre></div> <p>The EMA formula is: <code>ema = smoothing * ema_previous + (1 - smoothing) * proposed</code>. With the default of 0.2, each new step size is 80% the proposed value and 20% the previous EMA, giving the timer a short memory that damps fluctuations without introducing significant lag.</p> <hr> <h2 id=timer-state-and-checkpointing>Timer State and Checkpointing<a class=headerlink href=#timer-state-and-checkpointing title="Permanent link">&para;</a></h2> <p>The <code>Timer</code> tracks its complete internal state, including step count, elapsed time, recent performance metrics, and failed step size history. You can save and restore this state for simulation checkpointing:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1># Save timer state</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=n>timer_state</span> <span class=o>=</span> <span class=n>timer</span><span class=o>.</span><span class=n>dump_state</span><span class=p>()</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=c1># Later, restore from saved state</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=n>restored_timer</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Timer</span><span class=o>.</span><span class=n>load_state</span><span class=p>(</span><span class=n>timer_state</span><span class=p>)</span>
</span></code></pre></div> <p>The <code>dump_state()</code> method returns a <code>TimerState</code> dictionary containing all configuration parameters and runtime state. The <code>load_state()</code> class method reconstructs a timer with the exact same state, allowing a simulation to resume from a checkpoint without losing the adaptive algorithm's learned behavior.</p> <p>This is particularly valuable for long-running simulations where you want to resume after a system interruption without restarting from the beginning. The restored timer will propose the same step size and use the same performance history as the original.</p> <hr> <h2 id=recommended-configurations>Recommended Configurations<a class=headerlink href=#recommended-configurations title="Permanent link">&para;</a></h2> <h3 id=standard-waterflood>Standard Waterflood<a class=headerlink href=#standard-waterflood title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=n>timer</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Timer</span><span class=p>(</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>    <span class=n>initial_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>    <span class=n>max_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>10</span><span class=p>),</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>    <span class=n>min_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>hours</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>    <span class=n>simulation_time</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>years</span><span class=o>=</span><span class=mi>3</span><span class=p>),</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=p>)</span>
</span></code></pre></div> <p>Waterfloods have moderate dynamics with a fairly smooth saturation front. The default parameters work well for most waterflood scenarios.</p> <h3 id=gas-injection>Gas Injection<a class=headerlink href=#gas-injection title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=n>timer</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Timer</span><span class=p>(</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>    <span class=n>initial_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mf>0.5</span><span class=p>),</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>    <span class=n>max_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>5</span><span class=p>),</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>    <span class=n>min_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>hours</span><span class=o>=</span><span class=mf>0.5</span><span class=p>),</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>    <span class=n>simulation_time</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>years</span><span class=o>=</span><span class=mi>3</span><span class=p>),</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=p>)</span>
</span></code></pre></div> <p>Gas injection creates sharper fronts and higher velocities. Smaller initial and maximum step sizes prevent early rejections. The smaller minimum step size accommodates the sharp gas front arrival.</p> <h3 id=primary-depletion>Primary Depletion<a class=headerlink href=#primary-depletion title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=n>timer</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Timer</span><span class=p>(</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>    <span class=n>initial_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>2</span><span class=p>),</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>    <span class=n>max_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>30</span><span class=p>),</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>    <span class=n>min_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>    <span class=n>simulation_time</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>years</span><span class=o>=</span><span class=mi>10</span><span class=p>),</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=p>)</span>
</span></code></pre></div> <p>Depletion has very smooth, gradual pressure decline with no injection fronts. Larger step sizes are appropriate because the physics changes slowly and uniformly across the grid.</p> <h3 id=well-startup-rate-change>Well Startup / Rate Change<a class=headerlink href=#well-startup-rate-change title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=n>timer</span> <span class=o>=</span> <span class=n>bores</span><span class=o>.</span><span class=n>Timer</span><span class=p>(</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>    <span class=n>initial_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>hours</span><span class=o>=</span><span class=mi>6</span><span class=p>),</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>    <span class=n>max_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=mi>10</span><span class=p>),</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>    <span class=n>min_step_size</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>minutes</span><span class=o>=</span><span class=mi>30</span><span class=p>),</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>    <span class=n>simulation_time</span><span class=o>=</span><span class=n>bores</span><span class=o>.</span><span class=n>Time</span><span class=p>(</span><span class=n>years</span><span class=o>=</span><span class=mi>5</span><span class=p>),</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>    <span class=n>ramp_up_factor</span><span class=o>=</span><span class=mf>1.15</span><span class=p>,</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>    <span class=n>growth_cooldown_steps</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=p>)</span>
</span></code></pre></div> <p>Well events cause rapid near-wellbore transients that need very small initial steps. The ramp-up factor with a short cooldown allows the timer to grow quickly once the transient passes.</p> <hr> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">&para;</a></h2> <div class="admonition warning"> <p class=admonition-title>Maximum Rejections Exceeded</p> <p>If you see <code>TimingError: Maximum number of consecutive time step rejections exceeded</code>, the timer hit the minimum step size and still could not produce an acceptable step. Common causes:</p> <ul> <li>The minimum step size is too large for the problem dynamics. Try reducing it.</li> <li>Permeability contrast is extreme. Try a stronger preconditioner (AMG or CPR).</li> <li>Well rates are too high for the grid resolution. Reduce the rate or refine the grid near the well.</li> <li>Initial conditions are inconsistent (saturations do not sum to 1.0, pressure below bubble point without free gas).</li> </ul> </div> <div class="admonition warning"> <p class=admonition-title>Step Size Stuck at Minimum</p> <p>If the timer repeatedly reports step sizes at or near the minimum, the adaptive algorithm is struggling. This usually indicates that the physics demands small steps throughout, not just during a transient. Consider relaxing the saturation or pressure change limits, using the implicit scheme (which allows larger steps), or coarsening the grid.</p> </div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../preconditioners/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Preconditioners"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Preconditioners </div> </div> </a> <a href=../precision/ class="md-footer__link md-footer__link--next" aria-label="Next: Precision"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Precision </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2025 ti-oluwa </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/ti-oluwa target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://pypi.org/project/bores-framework/ target=_blank rel=noopener title=pypi.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"annotate": null, "base": "../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tabs.link", "content.tooltips", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.79ae519e.min.js></script> <script src=../../../javascripts/mathjax.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>